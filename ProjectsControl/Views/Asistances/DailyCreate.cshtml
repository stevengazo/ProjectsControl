@model List<Asistance>;



<script>
 
   function deleteRow(btn){
       console.log(btn);
       let row = btn.parentNode.parentNode;
       row.parentNode.removeChild(row);
       orderTable(row);
   }
   



const orderTable = (rowDeleted)=>{
    let tableAsistances = document.getElementById("table-asistances").children;  
    /// Change any row
    for (let index = 0; index < tableAsistances.length; index++) {        
        // set the values 
        var ProjectId = document.getElementsByName("["+index+"].ProjectId");           
        console.log( ProjectId.Attributes);
        var EmployeesId = document.getElementsByName("["+index+"].EmployeeId");        
        var DateOfBegin = document.getElementsByName("["+index+"].DateOfBegin");        
        console.log( ProjectId.getAttribute("Id"));
    }
}
</script>



<div class="flex-row align-content-center">
    <label >@ViewBag.ErrorMessage</label>
</div>

<form method="post">
    <table class="table" id="table-asistances">
        <thead>
            <tr>
                <td>
                    Empleado
                </td>
                <td>
                    Proyecto
                </td>
                <td>
                    Entrada
                </td>
                <td>
                    Salida
                </td>
                <td>
                    N°Semana
                </td>
                <td>
                    Ausente
                </td>
                <td>                    
                </td>
            </tr>
        </thead>
        <tbody>
            @for (var i = 0; i < Model.Count; i++)
            {
                <!--Row-->
                <tr>
                    <td>
                        <!--Name-->
                    <label>
                            @Model[i].Employee.Name
                            <div style="display:none">
                                <input asp-for="@Model[i].EmployeeId" value="@Model[i].EmployeeId" readonly>
                            </div>

                        </label>
                    </td>
                    <td>
                        <!--Project-->
                    <input list="active-projects" asp-for="@Model[i].ProjectId" class="form-control-sm">
                    <datalist id="active-projects">
                            @foreach (var item in ViewBag.Projects)
                            {
                                <option value="@item.Key">@item.Value</option>
                            }
                    </datalist>
                </td>
                <td>
                    <!--DateOfBegin-->
                    <input asp-for="@Model[i].DateOfBegin" class="form-control-sm" />
                    
                </td>
                <td>
                    <!--DateOfEnd-->
                    <input asp-for="@Model[i].DateOfEnd" class="form-control-sm" />
                </td>
                <td>
                    <!--Number Of Week-->
                     <select asp-for="@Model[i].WeekId" class ="form-control" asp-items="ViewBag.WeekId"></select>
                </td>
                <td>
                    <!--is absent-->
                     <div class="flex-column align-content-center">
                         <label>
                             ¿Ausente?
                         </label>
                         <input id="checkbox-@i" type="checkbox">
                     </div>
                </td>
                <td>
                    <!--Delete Row-->
                    <div id="DeleteRow- @i"  class=" btn btn-outline-danger" onclick="deleteRow(this)" >Borrar</div>
                </td>
            </tr>
           }
        </tbody>
    </table>
    <div class="flex-row align-content-center">
        <input type="submit" value="Guardar" class="btn-primary"/>
    </div>
</form>